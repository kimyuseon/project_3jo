{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/my_django.css' %}">
    <title>재료 선택</title>
</head>
<body class="select-page">
    <div class="container">
        <header class="select-header" style="display: flex; align-items: center; padding-bottom: 10px; border-bottom: 1px solid #eee;">
            <a href="{% url 'my_django:fridge_main' %}" class="close-btn" style="font-size: 24px; text-decoration: none; color: #333;">✕</a>
            <h2 style="margin-left: 15px; font-size: 18px;">재료 선택</h2>
        </header>

        <div class="category-scroll-wrapper">
            {% for category in sample_data.keys %}
                <div class="category-tab {% if forloop.first %}active{% endif %}" 
                     onclick="openTab(event, 'tab-{{ forloop.counter }}')">
                    {{ category }}
                </div>
            {% endfor %}
        </div>

        <div class="ingredient-content">
            {% for category, items in sample_data.items %}
                <div id="tab-{{ forloop.counter }}" class="ingredient-panel {% if forloop.first %}show{% endif %}">
                    <div class="ingredient-grid">
                        {% for item in items %}
                            <div class="card"> <form action="{% url 'my_django:add_ingredient' %}" method="post">
                                    {% csrf_token %}
                                    <input type="hidden" name="name" value="{{ item }}">
                                    <input type="hidden" name="category" value="{{ category }}">
                                    
                                    <div class="image-box" style="height: 50px; display: flex; align-items: center; justify-content: center;">
                                        <img src="{% static 'images/' %}{{ item }}.png" 
                                             alt="{{ item }}" 
                                             style="width: 45px; height: 45px; object-fit: contain;">
                                    </div>
                                    <span class="ingredient-name" style="display: block; margin: 10px 0; font-size: 14px;">{{ item }}</span>
                                    <button type="submit" class="add-badge" style="background: #ff6b6b; color: white; border: none; border-radius: 50%; width: 25px; height: 25px; cursor: pointer;">+</button>
                                </form>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <script>
        function openTab(evt, tabId) {
            const panels = document.querySelectorAll('.ingredient-panel');
            const tabs = document.querySelectorAll('.category-tab');
            panels.forEach(p => p.classList.remove('show'));
            tabs.forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('show');
            evt.currentTarget.classList.add('active');
        }
    </script>
</body>
</html>
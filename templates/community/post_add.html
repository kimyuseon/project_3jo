{% load static %}
<!doctype html>
<html lang="ko">
<head>
    <link rel="stylesheet" href="{% static 'css/community.css' %}">
    <title>{{ post.title }}</title>
</head>
<body>
    <div id="navbar">
        <a href="{% url 'community:post_list' %}" style="text-decoration:none; color:#333;">â† ëª©ë¡ìœ¼ë¡œ</a>
        <span>ì»¤ë®¤ë‹ˆí‹° : <b>ìƒì„¸ë³´ê¸°</b></span>
    </div>

    <div id="post-detail" style="max-width: 800px; margin: 20px auto; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
        <h1 style="font-size: 28px; margin-bottom: 10px;">{{ post.title }}</h1>
        <p style="color: #888; font-size: 14px;">ì‘ì„±ì: {{ post.author.username }} | {{ post.created_at|date:"Y-m-d H:i" }}</p>
        
        <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">

        {% if post.thumbnail %}
            <img src="{{ post.thumbnail.url }}" style="width: 100%; border-radius: 10px; margin-bottom: 20px;">
        {% endif %}
        
        <div style="font-size: 16px; line-height: 1.8; color: #333; min-height: 200px;">
            {{ post.content|linebreaks }}
        </div>

        <div style="text-align: center; margin: 40px 0;">
            <form action="{% url 'community:post_like' post.id %}" method="POST" style="display: inline;">
                {% csrf_token %}
                <button type="submit" style="background: white; border: 2px solid #ff6b6b; color: #ff6b6b; padding: 12px 30px; border-radius: 50px; font-weight: bold; cursor: pointer; display: flex; align-items: center; margin: 0 auto; gap: 10px; transition: 0.2s;">
                    {% if request.user in post.likes.all %}
                        <span style="font-size: 20px;">â¤ï¸</span> ì¢‹ì•„ìš” ì·¨ì†Œ
                    {% else %}
                        <span style="font-size: 20px;">ğŸ¤</span> ì¢‹ì•„ìš”
                    {% endif %}
                    <span style="border-left: 1px solid #ff6b6b; padding-left: 10px; font-size: 18px;">{{ post.total_likes }}</span>
                </button>
            </form>
        </div>

        {% if post.author == request.user %}
        <div style="text-align: right; margin-top: 20px;">
            <a href="{% url 'community:post_edit' post.id %}" class="btn" style="background:#4dabf7; color:white; text-decoration:none; padding:8px 15px; border-radius:5px;">ìˆ˜ì •</a>
            <a href="{% url 'community:post_delete' post.id %}" class="btn" style="background:#ff6b6b; color:white; text-decoration:none; padding:8px 15px; border-radius:5px;" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</a>
        </div>
        {% endif %}

        <hr style="border: 0; border-top: 1px solid #eee; margin: 30px 0;">

        <div id="comment-section">
            <h3>ëŒ“ê¸€ {{ comments.count }}ê°œ</h3>
            <form method="POST">
                {% csrf_token %}
                <textarea name="comment" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”" style="width:100%; height:80px; padding:10px; border:1px solid #ddd; border-radius:5px;"></textarea>
                <button type="submit" style="margin-top:10px; background:#333; color:white; border:none; padding:10px 20px; border-radius:5px; cursor:pointer;">ëŒ“ê¸€ ë“±ë¡</button>
            </form>

            <ul style="list-style:none; padding:0; margin-top:20px;">
                {% for comment in comments %}
                <li style="padding:15px 0; border-bottom:1px solid #f9f9f9;">
                    <strong>{{ comment.author.username }}</strong> <small style="color:#aaa; margin-left:10px;">{{ comment.created_at|date:"Y-m-d H:i" }}</small>
                    <p style="margin: 5px 0;">{{ comment.content }}</p>
                </li>
                {% empty %}
                <li style="color:#aaa;">ì²« ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”!</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</body>
</html>
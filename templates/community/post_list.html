{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/community.css' %}">

<div id="post-list-container">
    <div class="header" style="display: flex; justify-content: space-between; align-items: center; margin: 20px 0 25px;">
        <h1 style="font-size: 24px; margin: 0;">ğŸ‘¥ ì»¤ë®¤ë‹ˆí‹°</h1>
        <a href="{% url 'community:post_add' %}" 
           style="background: #ff6b6b; color: white; text-decoration: none; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: bold;">
           ê¸€ì“°ê¸°
        </a>
    </div>

    <div class="grid"> 
        {% for post in posts %}
            <div class="card" style="text-align: left; padding: 0; overflow: hidden; cursor: pointer;" 
                 onclick="location.href='{% url 'community:post_detail' post.id %}'">
                
                <div class="post-img-wrapper" style="height: 150px; background: #f8f9fa;">
                    {% if post.thumbnail %}
                        <img src="{{ post.thumbnail.url }}" alt="{{ post.title }}" style="width: 100%; height: 100%; object-fit: cover;">
                    {% else %}
                        <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #ccc; font-size: 12px;">
                            No Image
                        </div>
                    {% endif %}
                </div>

                <div style="padding: 15px;">
                    <h3 style="font-size: 16px; margin: 0 0 8px; color: #333; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                        {{ post.title }}
                    </h3>
                    <p style="font-size: 13px; color: #666; margin: 0 0 12px; height: 36px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
                        {{ post.content|truncatechars:50 }}
                    </p>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <small style="color: #ff6b6b; font-weight: bold;">ğŸ’¬ {{ post.comment_set.count }}</small>
                        <small style="color: #bbb;">{{ post.created_at|date:"m/d" }}</small>
                    </div>
                </div>
            </div>
        {% empty %}
            <div style="grid-column: span 3; text-align: center; padding: 100px 0; color: #999;">
                <p>ì²« ë²ˆì§¸ ê²Œì‹œê¸€ì˜ ì£¼ì¸ê³µì´ ë˜ì–´ë³´ì„¸ìš”! âœï¸</p>
            </div>
        {% endfor %}
    </div>
</div>

<div style="height: 50px;"></div>
{% endblock %}